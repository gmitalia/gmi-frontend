(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[492],{6320:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/contest",function(){return s(7902)}])},4410:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var n=s(5893);s(7294);function i(e){var t=e.disabled||!1;return(0,n.jsx)("a",{href:null===e||void 0===e?void 0:e.url,title:null===e||void 0===e?void 0:e.title,className:e.className,children:(0,n.jsx)("button",{disabled:t,onClick:null===e||void 0===e?void 0:e.onClick,className:"inline-block p-2 bg-primary text-white font-medium text-xs leading-tight uppercase rounded-full shadow-md hover:bg-secondary hover:shadow-lg focus:bg-secondary focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out disabled:cursor-not-allowed disabled:bg-gray-700 disabled:opacity-20",children:e.children})})}},1665:function(e,t,s){"use strict";s.d(t,{X:function(){return r}});var n=s(5893),i=(s(4824),s(4620)),r=function(e){var t=e.children;return(0,n.jsxs)("div",{className:"flex flex-grow flex-column bg-backcolor",children:[(0,n.jsx)("div",{className:"w-72 lg:mr-2 hidden lg:inline",children:(0,n.jsx)(i.Z,{})}),(0,n.jsx)("div",{className:"flex-1 lg:ml-2",children:t})]})}},7902:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var n=s(5893),i=s(7294),r=s(1163),a=s(7288),o=s(5684),l=s(9871),c=s(4410);function d(e){var t=e.disabled||!1;return(0,n.jsx)("button",{disabled:t,className:"".concat(e.className," inline-block px-6 py-2.5 bg-primary text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-secondary hover:shadow-lg focus:bg-secondary focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out disabled:cursor-not-allowed disabled:bg-gray-700 disabled:opacity-20"),onClick:null===e||void 0===e?void 0:e.onClick,children:e.children})}function u(e){var t=function(){r?a(null):l.Z.getInstance().getVotes(e.contest,e.game,(function(e){if(e.success){for(var t=0;t<e.votes.length;t++)e.votes[t].pros=JSON.parse(e.votes[t].pros),e.votes[t].cons=JSON.parse(e.votes[t].cons),Array.isArray(e.votes[t].pros)||(r[t].pros=[]),Array.isArray(e.votes[t].cons)||(r[t].cons=[]);a(e.votes)}else m(e.error)}))},s=(0,i.useState)(),r=s[0],a=s[1],c=(0,i.useState)(),u=c[0],m=c[1],x=(0,i.useState)(!1),h=x[0],v=x[1];if(l.Z.getInstance().getVotes(e.contest,e.game,(function(e){e.success&&(e.votes.length>0?v(!0):v(!1))})),u)return(0,n.jsx)("div",{children:u});var f="",p=r?"":"Visualizza Voti";if(r){var g=r.map((function(e){var t=e.pros.map((function(e){return(0,n.jsx)("span",{className:"bg-lime-200 px-1",children:o.prosList[e]},e)})),s=e.cons.map((function(e){return(0,n.jsx)("span",{className:"bg-red-200 px-1",children:o.consList[e]},e)})),i=(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"})});return(0,n.jsxs)("div",{className:"my-3 pb-3 border-b-2",children:[(0,n.jsxs)("h5",{className:"flex justify-center gap-4 font-bold text-cyan-900",children:[i,e.judge_name,i]}),(0,n.jsx)("div",{className:"mb-2",children:e.comment.trim().split("\n").map((function(e,t){return(0,n.jsxs)("span",{children:[e,(0,n.jsx)("br",{})]},t)}))}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[(0,n.jsx)("b",{children:"Pro"})," ",t]}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[(0,n.jsx)("b",{children:"Contro"})," ",s]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"Voto:"})," ",(0,n.jsx)("span",{className:"bg-primary mx-1 px-1 text-slate-50",children:e.score})]})]},e.user_id)}));f=(0,n.jsx)("div",{className:"bg-neutral-700/[.75] fixed top-0 left-0 right-0 h-full z-10",children:(0,n.jsxs)("div",{className:"modalVotes relative bg-white max-w-screen-lg mx-auto h-full md:h-5/6 md:my-10 overflow-y-scroll",children:[(0,n.jsx)("div",{className:"sticky bg-white top-0 left-0 w-full z-20 pt-5 px-10 flex justify-end",children:(0,n.jsx)("button",{className:"md:top-5 md:right-5",onClick:t,children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-900 text-center",children:e.gamename}),(0,n.jsx)("div",{className:"px-2 pb-2 md:px-10 md:pb-10",children:g})]})})}return(0,n.jsxs)("div",{children:[p&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(d,{disabled:!h,onClick:t,children:p})}),f]})}var m=s(8764).Buffer,x=function(e){var t=e.game,s=l.Z.getInstance().imageURL+"/thumbnail.png";t.image_url&&(s=t.image_url.indexOf("http")>=0?t.image_url:l.Z.getInstance().imageURL+t.image_url+"?"+Date.now().toString());var i="";try{i=m.from(t.authors,"base64").toString("ascii"),i=(i=JSON.parse(i)).map((function(e){return(0,n.jsx)("div",{children:e.name},e.id)}))}catch(o){console.error(t.authors,o)}var r="";r=t.download_url&&0!=t.download_url?(0,n.jsx)(c.Z,{disabled:!1,url:null===t||void 0===t?void 0:t.download_url,title:"Download ".concat(null===t||void 0===t?void 0:t.name),children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}):(0,n.jsx)(c.Z,{disabled:!0,title:"Download non disponibile",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})});var a=e.showVotes?(0,n.jsx)(u,{contest:e.contest,game:null===t||void 0===t?void 0:t.id,gamename:null===t||void 0===t?void 0:t.name}):"";return(0,n.jsxs)("div",{className:"rounded-lg shadow-lg bg-white overflow-hidden relative flex flex-col justify-between","data-position":null===e||void 0===e?void 0:e.position,children:[(0,n.jsx)("div",{className:"div-image",children:s&&(0,n.jsx)("img",{className:"image-centered object-cover w-full md:h-52",alt:"thumbnail",src:s,layout:"fill",objectfit:"cover"})}),(0,n.jsxs)("div",{className:"p-6 flex flex-col flex-1 justify-start relative",children:[(null===e||void 0===e?void 0:e.position)<=3&&(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)("i",{className:"fa fa-trophy p-2 -m-4 rounded-full text-2xl bg-white absolute top-0 "+(1===e.position?"text-amber-300":"")+(2===e.position?"text-neutral-400":"")+(3===e.position?"text-red-400":"")})}),(0,n.jsxs)("div",{className:"h-24 overflow-hidden",children:[(0,n.jsx)("div",{className:"text-2xl font-bold text-gray-900 text-center z-10",children:t.name}),(0,n.jsxs)("div",{className:"author text-sm text-gray-700 text-center",children:[" di ",i]})]}),(0,n.jsx)("div",{className:"text-gray-700 text-base mb-4",children:t.short_description})]}),(0,n.jsxs)("div",{className:"p-6 flex justify-between items-center",children:[a,r]})]})};function h(){return(0,n.jsx)("div",{className:"flex justify-center w-full",children:(0,n.jsxs)("div",{className:"spinner",children:[(0,n.jsx)("div",{className:"rect1"}),(0,n.jsx)("div",{className:"rect2"}),(0,n.jsx)("div",{className:"rect3"}),(0,n.jsx)("div",{className:"rect4"}),(0,n.jsx)("div",{className:"rect5"})]})})}function v(e){var t=e.contest,s=(0,r.useRouter)(),a=(0,i.useState)(),o=a[0],c=a[1],u=(0,i.useState)(!1),m=u[0],v=u[1];(0,i.useEffect)((function(){return l.Z.getInstance().getGames(e.contest,(function(e){c(e.games),v(e.public_results)})),function(){return c(null)}}),[t]);var f=void 0==o,p=o?o.map((function(e,s){return(0,n.jsx)(x,{contest:t,position:s+1,game:e,showVotes:m},e.id)})):void 0,g=m?(0,n.jsx)(d,{className:"my-4",onClick:function(){return s.push("/results?contest="+t)},children:"Classifica Dettagliata"}):"";return(0,n.jsxs)("div",{children:[g,(0,n.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 xl:grid-cols-3 2xl:gap-8 my-3",children:f?(0,n.jsx)(h,{}):p})]})}var f=s(381),p=s.n(f),g=s(1665);function j(e){var t=(0,r.useRouter)(),s=(0,a.getQuery)(t),d=(0,i.useState)(!1),u=d[0],m=d[1],x=(0,i.useState)(),h=x[0],f=x[1],j=(0,i.useState)(),b=j[0],w=j[1];if((0,i.useEffect)((function(){console.debug("fetching contests",s.contest),l.Z.getInstance().getContest(s.contest,(function(e){e.success?f(e.contests[0]):w(e.error||"invalid contest")})),console.debug("fetching participants",s.contest),l.Z.getInstance().getParticipants(s.contest,!0,(function(e){e.success&&m(e.participants[0])}))}),[s.contest]),b)return(0,n.jsx)("div",{children:(0,n.jsxs)("div",{children:["ERROR: ",b]})});if(!h)return(0,n.jsx)("div",{children:"Loading"});var N=new Date(Date.parse(h.completed_at)),y=new Date(Date.parse(h.end_at)),k=Date.now()>N,_=Date.now()<y,C=u&&u.kind==o.ParticipantType.judge,M=u&&u.kind==o.ParticipantType.competitor,D=[],L=C&&!k&&!_,S=0==L&&_&&0==M,V=0==L&&_&&M;L&&D.push((0,n.jsx)("input",{type:"button",onClick:function(){return t.push("/editvotes?contest="+h.id)},value:"Vota"})),S&&D.push((0,n.jsx)("input",{type:"button",onClick:function(){return t.push("/participation?contest="+h.id)},value:"Modifica Dati Partecipazione"})),V&&D.push((0,n.jsx)("input",{type:"button",onClick:function(){return t.push("/participation?contest="+h.id)},value:"Invia Gioco"}));var Z=_?"":(0,n.jsx)("span",{children:"(Scaduto)"}),z=k?(0,n.jsx)("span",{children:"(Scaduto)"}):"";return(0,n.jsxs)(g.X,{children:[(0,n.jsxs)("div",{className:"flex justify-start gap-4 items-center",children:[(0,n.jsx)(c.Z,{onClick:function(){return t.push("/")},children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 15l-3-3m0 0l3-3m-3 3h8M3 12a9 9 0 1118 0 9 9 0 01-18 0z"})})}),(0,n.jsx)("h2",{className:"text-2xl",children:h.name})]}),(0,n.jsx)("div",{className:"my-3",children:D.map((function(e,t){return(0,n.jsx)("el",{},t)}))}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"Termine Consegna"}),": ",p()(y).format("DD MMMM YYYY")," ",Z]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"Termine Giudizi"}),": ",p()(y).format("DD MMMM YYYY")," ",z]}),(0,n.jsx)(v,{contest:h.id})]})}var b=s(9008),w=s.n(b);function N(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(w(),{children:(0,n.jsx)("title",{children:"Contest"})}),(0,n.jsx)(j,{})]})}},7288:function(e){"use strict";var t=["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"];e.exports={getQuery:function(e){var t=e.asPath.lastIndexOf("?"),s=e.asPath.substring(t+1);return Object.fromEntries(new URLSearchParams(s))},getItalianDate:function(e){return e.getDate()+" "+t[e.getMonth()]}}}},function(e){e.O(0,[885,764,774,888,179],(function(){return t=6320,e(e.s=t);var t}));var t=e.O();_N_E=t}]);