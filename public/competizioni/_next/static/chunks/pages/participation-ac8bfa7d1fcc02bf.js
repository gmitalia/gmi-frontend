(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[989],{6814:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/participation",function(){return n(132)}])},4410:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(5893);n(7294);function i(e){var t=e.disabled||!1;return(0,a.jsx)("a",{href:null===e||void 0===e?void 0:e.url,title:null===e||void 0===e?void 0:e.title,className:e.className,children:(0,a.jsx)("button",{disabled:t,onClick:null===e||void 0===e?void 0:e.onClick,className:"inline-block p-2 bg-primary text-white font-medium text-xs leading-tight uppercase rounded-full shadow-md hover:bg-secondary hover:shadow-lg focus:bg-secondary focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out disabled:cursor-not-allowed disabled:bg-gray-700 disabled:opacity-20",children:e.children})})}},8040:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(5893);n(7294);function i(e){var t=e.disabled||!1;return(0,a.jsx)("button",{disabled:t,className:"".concat(e.className," inline-block px-6 py-2.5 bg-primary text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-secondary hover:shadow-lg focus:bg-secondary focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out disabled:cursor-not-allowed disabled:bg-gray-700 disabled:opacity-20"),onClick:null===e||void 0===e?void 0:e.onClick,children:e.children})}},132:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var a=n(5893),i=n(7294),s=n(1163),o=n(7288),r=n(5684),c=n(9871),l=n(8040),u=n(4410),d="form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none ";function m(e){var t=(0,s.useRouter)(),n=e.contestId,o=e.participation||[],m=o.game_thumbnail?c.Z.getInstance().imageURL+o.game_thumbnail+"?"+Date.now().toString():"",g=(0,i.useState)(o.game_name||""),h=g[0],f=g[1],x=(0,i.useState)(o.game_url||""),p=x[0],b=x[1],v=(0,i.useState)(o.game_short_desc||""),j=v[0],w=v[1],N=(0,i.useState)(o.game_desc||""),k=N[0],y=N[1],S=(0,i.useState)(!1),_=S[0],C=S[1],D=(0,i.useState)(m),L=D[0],I=D[1],P=(0,i.useState)(!0),z=P[0],Z=P[1],E=(0,i.useState)(),F=E[0],M=E[1],R=(0,i.useState)(),U=R[0],O=R[1],T=(0,i.useState)(),B=T[0],G=T[1];(0,i.useEffect)((function(){var e=/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(p);C(e),e||Z(!0)}),[p]),(0,i.useEffect)((function(){var e=o.game_thumbnail?c.Z.getInstance().imageURL+o.game_thumbnail+"?"+Date.now().toString():"";f(h||o.game_name||""),b(p||o.game_url||""),w(j||o.game_short_desc||""),y(k||o.game_desc||""),I(L||e)}),[o]);var A="";L&&(A=(0,a.jsx)("div",{children:(0,a.jsx)("img",{className:"image-centered",alt:h,width:320,height:180,src:L})}));var K="";return e.participation&&(K=(0,a.jsx)(l.Z,{type:"button",value:"Disiscriviti",disabled:B,onClick:function(){confirm("Vuoi disiscriverti e cancellare il gioco?")&&e.onDelete()},children:"Disiscriviti"})),(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsxs)("div",{className:"flex justify-start gap-4 items-center",children:[(0,a.jsx)(u.Z,{onClick:function(){return t.push("/contest?contest="+n)},children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 15l-3-3m0 0l3-3m-3 3h8M3 12a9 9 0 1118 0 9 9 0 01-18 0z"})})}),(0,a.jsx)("h2",{className:"text-2xl",children:"Informazioni Gioco"})]}),(0,a.jsx)("span",{className:"text-red-600",children:F}),(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("span",{className:"block text-md font-medium text-slate-700",children:"Nome"}),(0,a.jsx)("input",{type:"text",value:h,placeholder:"Inserisci qui il nome del gioco",maxLength:128,onChange:function(e){f(e.target.value),Z(!1)},className:d})]}),(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("span",{className:"block text-md font-medium text-slate-700",children:"Link Download"}),(0,a.jsx)("input",{type:"text",maxLength:256,value:p,placeholder:"Link per il download del gioco",className:d,onChange:function(e){b(e.target.value),Z(!1)}}),_?" \u2713":(0,a.jsx)("span",{className:"text-red-600",children:"Link non valido"})]}),(0,a.jsxs)("label",{className:"block",children:[(0,a.jsxs)("span",{className:"block text-md font-medium text-slate-700",children:["Upload Image (max ",r.Config.maxThumbnailSize/1024,"KB)"]}),A,(0,a.jsx)("input",{type:"file",accept:".png,.jpg,.jpeg,.gif",onClick:function(e){I(null),O(null),Z(!1),e.target.value=null,M(null)},className:d,onChange:function(e){return function(e){if(e.size>r.Config.maxThumbnailSize)return M("L'immagine \xe8 troppo grande ("+Math.ceil(e.size/1024)+"KB)");var t=new FileReader;t.onload=function(e){I(e.target.result)},t.readAsDataURL(e),O(e),M(null),Z(!1)}(e.target.files[0])}})]}),(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("span",{className:"block text-md font-medium text-slate-700",children:"Descrizione Breve (max 256 caratteri)"}),(0,a.jsx)("textarea",{value:j,maxLength:256,className:d,onChange:function(e){w(e.target.value),Z(!1)}})]}),(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("span",{className:"block text-md font-medium text-slate-700",children:"Descrizione (max 1024 caratteri)"}),(0,a.jsx)("textarea",{value:k,style:{height:300},className:d,maxLength:r.Config.descriptionMaxLength,onChange:function(e){y(e.target.value),Z(!1)}})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[K,(0,a.jsx)(l.Z,{type:"button",value:"Salva",disabled:z||B,onClick:function(){G(!0),e.onFormSubmit({name:h,downloadUrl:p,shortDescription:j,description:k,thumbnailFile:U},(function(e){e.success||M(e.error),Z(e.success),G(!1)}))},children:"Salva"})]})]})}var g=function(e){return(0,a.jsx)("div",{className:"bg-blue-100 rounded-lg py-5 px-6 text-base text-blue-700 mb-3",role:"alert",children:e.children})};function h(e){var t=function(){c.Z.getInstance().getParticipation(h.contest,(function(e){e.success?(k(!!e.participation),p(e.participation)):j(e.error)}))},n=function(e,n){console.debug("submit",e),c.Z.getInstance().setParticipationData(h.contest,e,(function(e){e.success&&e.joined&&t(),n(e)}))},l=function(){console.debug("delete"),c.Z.getInstance().deleteParticipationData(h.contest,(function(e){e.success?(alert("Cancellato con successo"),d.push("/contest?contest="+h.contest)):j(e.error)}))},u=function(e){return(0,a.jsx)("div",{children:e})},d=(0,s.useRouter)(),h=(0,o.getQuery)(d),f=(0,i.useState)(),x=f[0],p=f[1],b=(0,i.useState)(),v=b[0],j=b[1],w=(0,i.useState)(!1),N=w[0],k=w[1];if((0,i.useEffect)(t,[h.contest]),v)return u(v);if(N){if(x){var y=x.kind==r.ParticipantType.judge;return u((0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(g,{children:["Sei iscritto come ",y?"Giudice":"Partecipante"]}),(0,a.jsx)(m,{participation:x,onFormSubmit:n,onDelete:l,contestId:h.contest})]}))}return(0,a.jsx)("div",{children:"loading"})}return u((0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g,{children:'Compila i seguenti campi e premi "Salva" per iscriverti alla competizione.'}),(0,a.jsx)(m,{participation:x,onFormSubmit:n,onDelete:l,contestId:h.contest})]}))}var f=n(9008),x=n.n(f);function p(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x(),{children:(0,a.jsx)("title",{children:"Participation"})}),(0,a.jsx)(h,{})]})}},7288:function(e){"use strict";var t=["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"];e.exports={getQuery:function(e){var t=e.asPath.lastIndexOf("?"),n=e.asPath.substring(t+1);return Object.fromEntries(new URLSearchParams(n))},getItalianDate:function(e){return e.getDate()+" "+t[e.getMonth()]}}}},function(e){e.O(0,[774,888,179],(function(){return t=6814,e(e.s=t);var t}));var t=e.O();_N_E=t}]);