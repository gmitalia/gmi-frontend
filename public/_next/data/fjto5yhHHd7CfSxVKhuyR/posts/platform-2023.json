{"pageProps":{"post":{"title":"Sviluppare un platform nel 2023","slug":{"current":"platform-2023","_type":"slug"},"body":[{"children":[{"_type":"span","marks":[],"text":"Premessa","_key":"40701aafef1e"}],"_type":"block","style":"h3","_key":"7d65c651cf59","markDefs":[]},{"children":[{"_key":"55c2ce45fb31","_type":"span","marks":[],"text":"Credo che i tutorial per lo sviluppo di giochi platform siano i più ricercati per ogni piattaforma di sviluppo, e "},{"_type":"span","marks":["strong"],"text":"GameMaker ","_key":"411be17cddad"},{"text":"non fa eccezione. \nQuesto però genera anche un problema: essendocene molti, nessuno si prende più la briga di crearne di nuovi. ","_key":"1d7130e292f5","_type":"span","marks":[]}],"_type":"block","style":"normal","_key":"967aa5f8d6c1","markDefs":[]},{"children":[{"marks":[],"text":"Però:","_key":"72d311fdfb66","_type":"span"}],"_type":"block","style":"normal","_key":"7d5534275a34","markDefs":[]},{"_type":"block","style":"normal","_key":"33d08b98b94f","listItem":"bullet","markDefs":[],"children":[{"_type":"span","marks":[],"text":"i software sono progrediti nel tempo, regalandoci nuove funzionalità.","_key":"f4217959720e"}],"level":1},{"listItem":"bullet","markDefs":[],"children":[{"text":"gli utenti sono diventati più esigenti, visto che anche gli indie come ","_key":"4bc62637be72","_type":"span","marks":[]},{"_key":"2d2e73e74f9c","_type":"span","marks":["em"],"text":"Celeste "},{"_type":"span","marks":[],"text":"hanno diverse accortezze lato codice per rendere i giochi più piacevoli.","_key":"e4e091049859"}],"level":1,"_type":"block","style":"normal","_key":"e698e49907fe"},{"style":"normal","_key":"af61b7ec3df0","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Date queste premesse, partiamo quindi con la creazione di un platform \"moderno\". ","_key":"266f2eb63313"}],"_type":"block"},{"_key":"a9e47fd7ff80","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Se preferite scaricare direttamente il codice sorgente del progetto trovate il link nella sezione ","_key":"2d3d239552b6"},{"marks":["em"],"text":"Download","_key":"0be8c232f865","_type":"span"},{"_type":"span","marks":[],"text":" di questo stesso articolo.","_key":"51877f110ca0"}],"_type":"block","style":"normal"},{"_type":"block","style":"h3","_key":"bf76509b8d87","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Caratteristiche","_key":"36d9a4e23f64"}]},{"style":"normal","_key":"4abafee524c0","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Il prodotto finale conterrà","_key":"fcd35c4ea9d3"}],"_type":"block"},{"style":"normal","_key":"066699722e92","listItem":"bullet","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Accelerazione e decelerazione","_key":"052e0fb7f0d6"}],"level":1,"_type":"block"},{"_key":"19429712eb26","listItem":"bullet","markDefs":[],"children":[{"marks":[],"text":"Collisioni con ","_key":"863c8a6bdf48","_type":"span"},{"_type":"span","marks":["em"],"text":"move_and_collide ","_key":"5e27cc6145a1"},{"_key":"e840031b84f4","_type":"span","marks":[],"text":"su superfici piane e non"}],"level":1,"_type":"block","style":"normal"},{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"Coyote Time","_key":"110e4cdba02a"}],"level":1,"_type":"block","style":"normal","_key":"f8d089b6babd","listItem":"bullet"},{"_key":"331c9a96d683","listItem":"bullet","markDefs":[],"children":[{"marks":[],"text":"Jump Buffer","_key":"e6dcd7497065","_type":"span"}],"level":1,"_type":"block","style":"normal"},{"markDefs":[],"children":[{"text":"Salti ad altezza variabile","_key":"2ad097685ef7","_type":"span","marks":[]}],"level":1,"_type":"block","style":"normal","_key":"dcad819b0f93","listItem":"bullet"},{"children":[{"_type":"span","marks":[],"text":"Animazioni / cambio sprite","_key":"aa2cf7a08484"}],"level":1,"_type":"block","style":"normal","_key":"2629fa86f5ae","listItem":"bullet","markDefs":[]},{"markDefs":[{"_type":"link","href":"https://manual.yoyogames.com/Setting_Up_And_Version_Information/IDE_Preferences/Feather_Settings.htm","_key":"b7e55d4f8ea1"}],"children":[{"marks":[],"text":"I nomi degli oggetti e delle variabili sono compatibili con la configurazione di ","_key":"00379d2dcfad","_type":"span"},{"_type":"span","marks":["b7e55d4f8ea1"],"text":"Feather","_key":"cda23bab0ad2"},{"_type":"span","marks":[],"text":" di default.","_key":"8e47f9b935d8"}],"_type":"block","style":"normal","_key":"8b64462b76ef"},{"markDefs":[],"children":[{"text":"Sviluppiamo il progetto","_key":"4e88a48b73bb","_type":"span","marks":[]}],"_type":"block","style":"h3","_key":"a312fe12261a"},{"style":"normal","_key":"26e1a1c73926","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Creiamo un nuovo progetto e inseriamo due oggetti:","_key":"f8d209cc9efb"}],"_type":"block"},{"listItem":"bullet","markDefs":[],"children":[{"_key":"8cab05eead3e","_type":"span","marks":["em"],"text":"obj_player"}],"level":1,"_type":"block","style":"normal","_key":"a797dd9bce57"},{"style":"normal","_key":"166502b9b552","listItem":"bullet","markDefs":[],"children":[{"_key":"5ea86bb63412","_type":"span","marks":["em"],"text":"obj_collision"}],"level":1,"_type":"block"},{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"Le basi: movimento e collisioni","_key":"1ab0edabfb97"}],"_type":"block","style":"h4","_key":"6f7c7a457bf8"},{"style":"normal","_key":"a5ed753a30a7","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Apriamo l'oggetto ","_key":"03c18d92671b"},{"_type":"span","marks":["strong"],"text":"obj_player ","_key":"ad287c33c514"},{"text":"e inseriamo queste variabili nel ","_key":"e7b0a4e38984","_type":"span","marks":[]},{"_type":"span","marks":["em"],"text":"Create Event","_key":"9b4cb3f72793"}],"_type":"block"},{"_type":"image","_key":"8dcca07e01d1","asset":{"_ref":"image-76bd6b01864eeb73b3dfd01a49c44af75a57578d-511x251-png","_type":"reference"}},{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"Tra nomi delle variabili e commenti dovrebbe essere tutto abbastanza lineare. Faccio solo notare che nelle ultime versioni di GameMaker, nelle funzioni per la gestione delle collisioni, si possono degli array di oggetti (o addirittura di tileset) invece di specificarne uno unico: per questo vedete la riga 9 fatta in questa maniera.","_key":"f00a79abeea3"}],"_type":"block","style":"normal","_key":"ddb6759f1cbb"},{"_type":"block","style":"normal","_key":"4310617da885","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Passiamo ora alla logica. Apriamo lo ","_key":"d07022d704fb"},{"marks":["em"],"text":"Step Event:","_key":"cc458b4dabde","_type":"span"}]},{"_type":"image","_key":"72b03ce7827b","asset":{"_ref":"image-a4b6a2feb9220f559b6c19b52fdf520224c8b4a6-396x302-png","_type":"reference"}},{"markDefs":[{"_type":"link","href":"https://manual.yoyogames.com/GameMaker_Language/GML_Reference/Maths_And_Numbers/Number_Functions/lerp.htm","_key":"e4fb23a76497"},{"_type":"link","href":"https://pastebin.com/7gzJTLKj","_key":"9dc8c20f7dc5"}],"children":[{"text":"Se sulle prime righe non credo ci sia niente di particolare da aggiungere, parliamo di quanto scritto tra le righe 9 e 13: qui viene gestita l'accelerazione e la decelerazione del nostro personaggio mentre ci muoviamo, evitando quel brusco passaggio tra l'immobilità e il movimento, e viceversa.\n","_key":"4c90824a905c","_type":"span","marks":[]},{"_type":"span","marks":["strong"],"text":"approach","_key":"e7ba54100253"},{"_key":"bb8cbebf3fdb","_type":"span","marks":[],"text":" non è una funziona nativa di GameMaker, ma la si usa da tempo immemore: è molto simile al "},{"_key":"07b682d4c483","_type":"span","marks":["e4fb23a76497"],"text":"lerp"},{"_key":"3a5e63490b09","_type":"span","marks":[],"text":" nativo di GM, con la differenza che qui il terzo parametro è un incremento \\ decremento statico, mentre nel lerp è percentuale. "}],"_type":"block","style":"normal","_key":"bad8a3221cc4"},{"markDefs":[{"_type":"link","href":"https://pastebin.com/7gzJTLKj","_key":"9dc8c20f7dc5"}],"children":[{"_type":"span","marks":[],"text":"E' un approccio anzi molto simile l'utilizzo di una funziona piuttosto che l'altra, ma, con la futura gestione delle animazioni che andremo ad implementare, mi trovo più comodo ad usare questo metodo.\n","_key":"7cf2b001493e"},{"_type":"span","marks":["9dc8c20f7dc5"],"text":"A questo link","_key":"56592029600a"},{"_type":"span","marks":[],"text":", condiviso al tempo dal buon Shaun Spalding, potete trovare la funzione da salvare all'interno di un file Script all'interno di GameMaker.\n","_key":"c944904e20ad"}],"_type":"block","style":"normal","_key":"cbe87b502946"},{"_type":"block","style":"normal","_key":"f4d4600ded12","markDefs":[],"children":[{"text":"Passiamo ora alla gestione del movimento verticale:","_key":"e33cff8355b2","_type":"span","marks":[]}]},{"_key":"1169671c0e43","asset":{"_type":"reference","_ref":"image-7271c3c8e583a2a8de1f4ec6d8a5ced5de53d93a-412x146-png"},"_type":"image"},{"children":[{"text":"Anche qui tutto abbastanza standard: diamo la possibilità al giocatore di saltare solo se siamo \"a terra\". Al momento va benissimo così, ma immaginerete anche voi che questo sarà uno dei punti da modificare quando dovremo gestire coyote time e jump buffer.","_key":"1ee72f5fa34d","_type":"span","marks":[]}],"_type":"block","style":"normal","_key":"edcefa16353b","markDefs":[]},{"asset":{"_ref":"image-06dbd84a029b4f1e8362e73f9320b62ff120f1a0-602x150-png","_type":"reference"},"_type":"image","_key":"4a70ba44eae6"},{"style":"normal","_key":"c0f912be7595","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Quest'ultima parte dello ","_key":"adc8959893d9"},{"_type":"span","marks":["em"],"text":"Step Event","_key":"811d426249d5"},{"_type":"span","marks":[],"text":" è tutta dedicata alle collisioni, e sono tutte gestite tramite la funzione ","_key":"be87e4a3aca6"},{"_type":"span","marks":["em"],"text":"move_and_collide","_key":"8a38bbad3c36"},{"_type":"span","marks":[],"text":": questa funzione permette di effettuare un movimento all'interno della room finchè non trova una o più istanze che lo bloccano.","_key":"70260fde5876"}],"_type":"block"},{"markDefs":[],"children":[{"_type":"span","marks":["strong"],"text":"move_and_collide","_key":"db45053b09a0"},{"_type":"span","marks":[],"text":" prevede 3 parametri obbligatori: movimento sull'asse X, movimento sull'asse y, oggetto (o array di oggetti, o tileset) che non permettono il movimento. La riga 26 da questo punto di vista rispetta quando appena descritto: l'oggetto si muoverà di hsp pixel orizzontalmente, di 0 px vericalmente, e collision_objects contiene l'array di oggetti con cui verificare le collisioni. ","_key":"c15a9a86bf5e"}],"_type":"block","style":"normal","_key":"adff4aa5ea31"},{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"Ci sono 4 ulteriori parametri opzionali che può accettare questa funzione:","_key":"81ae11a15900"}],"_type":"block","style":"normal","_key":"24904e430222"},{"children":[{"_type":"span","marks":["em","strong"],"text":"num_iterations","_key":"b41b5f7a16310"},{"text":", che indica ogni quanti pixel verificare la collisione. (di default è 4). L'operazione effettuata è ","_key":"4b9abcb783a5","_type":"span","marks":[]},{"_type":"span","marks":["em"],"text":"movimento","_key":"93efa8064b6d"},{"_type":"span","marks":[],"text":" (asse x o y) ","_key":"1fde48569013"},{"_key":"92e9c9f63d65","_type":"span","marks":["strong"],"text":"diviso"},{"_type":"span","marks":[],"text":" ","_key":"d22a219926cc"},{"text":"num_iterations","_key":"2175fba3d6cd","_type":"span","marks":["em"]},{"_type":"span","marks":[],"text":". Noi vogliamo che il check sia effettuato ad ogni pixel, per cui lo abbiamo valorizzato ad ","_key":"f84d47a1826a"},{"_key":"28f2d993047c","_type":"span","marks":["em"],"text":"hsp"},{"_type":"span","marks":[],"text":" così da avere ","_key":"e00460a9325f"},{"text":"hsp / hsp","_key":"aa825bc85fc4","_type":"span","marks":["em"]},{"_type":"span","marks":[],"text":" = 1 a riga 26, ad esempio.","_key":"a9c73c4429a3"}],"level":1,"_type":"block","style":"normal","_key":"1c5bc6ddd43a","listItem":"bullet","markDefs":[]},{"listItem":"bullet","markDefs":[],"children":[{"_key":"fbd7aa821d63","_type":"span","marks":["em","strong"],"text":"xoff"},{"_type":"span","marks":[],"text":", che indica la componente x della direzione nella quale muovere l'oggetto in caso di collisione (di default è perpendicolare alla direzione del movimento)","_key":"b48252b0b5ae"}],"level":1,"_type":"block","style":"normal","_key":"2ac9d8e31176"},{"listItem":"bullet","markDefs":[],"children":[{"_type":"span","marks":["em","strong"],"text":"yoff","_key":"a41f8dcc281d"},{"_type":"span","marks":[],"text":", che indica la componente x della direzione nella quale muovere l'oggetto in caso di collisione (di default è perpendicolare alla direzione del movimento)","_key":"dd6360e255ca"}],"level":1,"_type":"block","style":"normal","_key":"ca2d0786b9ec"},{"_type":"block","style":"normal","_key":"6d51a6357b9a","listItem":"bullet","markDefs":[],"children":[{"_type":"span","marks":["em","strong"],"text":"max_x_move","_key":"94b9fdda4078"},{"_type":"span","marks":[],"text":", la massima velocità con la quale l'istanza dovrebbe muoversi sull'asse x (di default è senza limite)","_key":"e960969568f4"}],"level":1},{"children":[{"text":"max_y_move","_key":"ecfd90012db4","_type":"span","marks":["em","strong"]},{"text":", la massima velocità con la quale l'istanza dovrebbe muoversi sull'asse y (di default è senza limite)","_key":"1a4a845fdccc","_type":"span","marks":[]}],"level":1,"_type":"block","style":"normal","_key":"92ddcd552d5e","listItem":"bullet","markDefs":[]},{"_key":"cd0057630915","markDefs":[],"children":[{"_type":"span","marks":[],"text":"La funzione move_and_collide ritorna l'array di oggetti con le quali c'è stata una collisione: per questo motivo alla riga 30 verifichiamo che ci sia almeno un riferimento ad un'istanza prima di rimuovere la velocità verticale.","_key":"4827c723e8f6"}],"_type":"block","style":"normal"},{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"Disegniamo ora le sprite e assegniamole ai vari oggetti: io ad esempio ho creato 3 \"muri\" (per averne uno orizzontale e due obliqui) e uno per il personaggio. Dobbiamo avere l'accortezza, però, di settare la collision mask a \"Precise (slow)\" per le sprite non squadrate:","_key":"23b87c4071e4"}],"_type":"block","style":"normal","_key":"052b9ba03ad5"},{"_type":"image","_key":"39950564cffb","asset":{"_ref":"image-b5e7a1461e41e7469487d65d43b964049facb962-999x559-png","_type":"reference"}},{"style":"normal","_key":"e51ffaa17a80","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Qui il risultato:","_key":"2055eb0c716b"}],"_type":"block"},{"_key":"9a61c349c107","asset":{"_ref":"image-588a3187af0e924f95fa5e62973ecf33113bee08-720x360-gif","_type":"reference"},"_type":"image"},{"style":"normal","_key":"89ae8c77dbac","markDefs":[],"children":[{"marks":[],"text":"Abbiamo scritto, in pochissime righe di codice, il codice di un platform \"base\".","_key":"0f366f092279","_type":"span"}],"_type":"block"},{"children":[{"_type":"span","marks":[],"text":"Coyote time","_key":"40af4d1cfda6"}],"_type":"block","style":"h3","_key":"523cd40f1454","markDefs":[]},{"style":"normal","_key":"56b74f161e7c","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Il ","_key":"f964331945bd"},{"_key":"82180e85ecee","_type":"span","marks":["em"],"text":"coyote time"},{"text":" è la possibilità data al giocatore di effettuare un salto anche se si è già andati oltre la fine di una piattaforma: il nome deriva da una di quelle scene \"classiche\" di ","_key":"1ae4aa7907c8","_type":"span","marks":[]},{"_key":"c3c337062b5f","_type":"span","marks":["em"],"text":"Will il Coyote"}],"_type":"block"},{"_type":"image","_key":"b3384271be7b","asset":{"_ref":"image-5ebae68d1f737ac859bc6b5d0208fe44760af736-380x263-jpg","_type":"reference"}},{"markDefs":[],"children":[{"text":"Può sembrare un'aggiunta superflua, ma sono caratteristiche come questa (insieme al jumb buffer) che rendono così piacevole il moveset di ","_key":"d4e732ce798e","_type":"span","marks":[]},{"_type":"span","marks":["em"],"text":"Celeste","_key":"6314b1b62ba2"},{"_type":"span","marks":[],"text":", ad esempio.","_key":"9ea98ad236a1"}],"_type":"block","style":"normal","_key":"77dd1ab3e0c6"},{"markDefs":[],"children":[{"_key":"4c164a9005b4","_type":"span","marks":[],"text":"Sviluppo"}],"_type":"block","style":"h4","_key":"0eec0a9babd9"},{"markDefs":[],"children":[{"marks":[],"text":"Il concetto è molto semplice: inseriamo un contatore che abbia un valore positivo quando il personaggio è su una piattaforma, ma che diminuisce man mano che passa il tempo lontano dalla piattaforma. Se il contatore ha un valore positivo il personaggio può ancora saltare, altrimenti no. Ovviamente il tempo di cui parlo deve essere solo qualche frame per dare un aiuto al giocatore.","_key":"5d012ceffd75","_type":"span"}],"_type":"block","style":"normal","_key":"70bd3f784ab3"},{"style":"normal","_key":"f120178d4c73","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Apriamo l'evento ","_key":"ce4337b8ba03"},{"_type":"span","marks":["em"],"text":"Create","_key":"0545a995fc54"},{"_type":"span","marks":[],"text":" di ","_key":"688179fe6105"},{"_type":"span","marks":["em"],"text":"obj_player","_key":"1bcf2d4ac32c"},{"_type":"span","marks":[],"text":" e inseriamo queste due nuove variabili:","_key":"3d71f2c9c323"}],"_type":"block"},{"_type":"image","_key":"ab00f8a3a556","asset":{"_ref":"image-c98937d6abcd86b5395630d755cc35566337eda3-206x57-png","_type":"reference"}},{"markDefs":[],"children":[{"_type":"span","marks":["strong"],"text":"coyote_time","_key":"6c0d3296e1bf"},{"text":" contiene appunto il numero di step per i quali, lasciata la piattaforma, il personaggio potrà ancora saltare. E' un valore volutamente alto per mostrare il funzionamento all'interno del tutorial, scegliete voi quello che sta meglio all'interno del vostro progetto.","_key":"3c02d0ab0641","_type":"span","marks":[]}],"_type":"block","style":"normal","_key":"5665eab10c8d"},{"style":"normal","_key":"be066d685b03","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Apriamo ora lo ","_key":"c8ce47f83192"},{"_type":"span","marks":["em"],"text":"step event","_key":"1d205b42a5bd"},{"_type":"span","marks":[],"text":" e modifichiamo la logica con cui usavamo la variabile ","_key":"ccb36cea343e"},{"_key":"b82f4244412f","_type":"span","marks":["em"],"text":"_on_ground "}],"_type":"block"},{"_type":"image","_key":"8029a6ce715d","asset":{"_ref":"image-f1dba6c746a8fad4e0a683126e2a7a20e584a28d-897x593-png","_type":"reference"}},{"style":"normal","_key":"62448f81f2dd","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Anzichè salvare la variabile ","_key":"00fbb88f49d9"},{"_type":"span","marks":["em"],"text":"_on_ground","_key":"15b20381ab0d"},{"marks":[],"text":" a true o false in base al fatto che il nostro personaggio fosse su una piattaforma o meno, la valorizziamo con il quantitativo di step salvato in ","_key":"b913e226eac5","_type":"span"},{"marks":["em"],"text":"coyote_time","_key":"8841c3d17ecf","_type":"span"},{"_key":"346c6b28579e","_type":"span","marks":[],"text":". Così facendo \"faremo credere\" di essere ancora sulla piattaforma al resto del codice (vedi riga 25)."}],"_type":"block"},{"_type":"image","_key":"cf9ac8e235ce","asset":{"_ref":"image-0058df0e9f0865bad113f1577718209389d120d5-720x360-gif","_type":"reference"}},{"children":[{"_type":"span","marks":[],"text":"Jump buffer","_key":"c981ea11bb3d"}],"_type":"block","style":"h3","_key":"159efe18e7f1","markDefs":[]},{"_type":"block","style":"normal","_key":"4e96628340ad","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Il ","_key":"19103ce482e2"},{"_type":"span","marks":["em"],"text":"jump buffer","_key":"15ff7935ffdf"},{"_key":"dab591eb80e8","_type":"span","marks":[],"text":" è quella tecnica che permette al giocatore di saltare da una piattaforma in cui siamo appena atterrati, anche se abbiamo mancato il tempismo e abbiamo premuto il tasto salto appena prima di toccare terra."}]},{"style":"h4","_key":"32fe59bdc230","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Sviluppo","_key":"db414ac7a3e9"}],"_type":"block"},{"_key":"0c77b561bd10","markDefs":[],"children":[{"_key":"ea9dbd2619bb","_type":"span","marks":[],"text":"Anche in questo caso la tecnica prevede un contatore che verificherà quanti step prima di toccare terra abbiamo premuto il tasto per saltare e, nel caso, farci saltare oppure no."}],"_type":"block","style":"normal"},{"style":"normal","_key":"b31268e75487","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Apriamo l'evento ","_key":"7467c44bada7"},{"_key":"936571130926","_type":"span","marks":["em"],"text":"Create"},{"text":" di ","_key":"09d3285c89e2","_type":"span","marks":[]},{"_type":"span","marks":["em"],"text":"obj_player","_key":"02bcb3b3284d"},{"_type":"span","marks":[],"text":" e inseriamo queste due nuove variabili:","_key":"0340a64209d7"}],"_type":"block"},{"_type":"image","_key":"cec43a7b8d3a","asset":{"_ref":"image-4149b1eb7514503c693bbe83712f7b5d5c9729ea-137x56-png","_type":"reference"}},{"_key":"b7ebf27a52d8","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Apriamo lo Step Event e cambiamo la gestione del salto (riga 24) così:","_key":"4516cec59803"}],"_type":"block","style":"normal"},{"_type":"image","_key":"1a53e2825420","asset":{"_ref":"image-44b67dd0137c56afe779c7ee0c8db074df721d6b-412x196-png","_type":"reference"}},{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"Alla pressione del tasto salto quindi non effettueremo più l'azione, ma \"caricheremo\" la variabile ","_key":"6573117092e1"},{"text":"can_jump","_key":"cbbe37eac3bc","_type":"span","marks":["em"]},{"_type":"span","marks":[],"text":": se questa sarà positiva e saremo sul sul terreno (quindi ","_key":"932e841fd845"},{"_type":"span","marks":["em"],"text":"on_ground ","_key":"d293a716f810"},{"_type":"span","marks":[],"text":"sarà maggiore di zero, per il discorso fatto sul ","_key":"ff28df84aaf4"},{"_type":"span","marks":["em"],"text":"coyote time","_key":"dc8719937ac6"},{"_type":"span","marks":[],"text":"), allora effettueremo un salto.","_key":"4d6fac15a34c"}],"_type":"block","style":"normal","_key":"b9c4cd05e6bd"},{"style":"normal","_key":"534a4e405be5","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Ovviamente qui è difficile dimostrare il codice con una gif animata: provate a valorizzare ","_key":"4e5647154cfb"},{"_type":"span","marks":["em"],"text":"jump_buffer ","_key":"d24a84a8bceb"},{"_type":"span","marks":[],"text":"con un valore molto alto e premete il tasto salto prima di toccare terra per riuscire ad apprezzarne il funzionamento.","_key":"bbaef8d5aaa0"}],"_type":"block"},{"_type":"block","style":"h3","_key":"6cc4abc25019","markDefs":[],"children":[{"marks":[],"text":"Salti ad altezza variabile","_key":"b36532ee0bb9","_type":"span"}]},{"_key":"966b86dde0fa","markDefs":[],"children":[{"text":"L'altezza del salto in un videogioco spesso è determinata da quanto si tiene premuto il pulsante adibito a questa azione. La realizzazione di qualcosa del genere è molto semplice.","_key":"6b58da10d945","_type":"span","marks":[]}],"_type":"block","style":"normal"},{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"Sviluppo","_key":"2c714d92692e"}],"_type":"block","style":"h4","_key":"e47cc6da25a5"},{"_key":"c3f36d8f5ebc","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Nello Step Event di obj_player inseriamo un check per verificare che il pulsante di salto sia costantemente tenuto premuto:","_key":"5fd50383e986"}],"_type":"block","style":"normal"},{"asset":{"_type":"reference","_ref":"image-f8ad8951a2cb0cee7020f4d80635f484ead06e71-382x94-png"},"_type":"image","_key":"fc7c93f31142"},{"markDefs":[],"children":[{"marks":[],"text":"La logica dietro sarà questa: se rilascio il pulsante di salto durante l'azione, ridurrò (nel nostro caso dimezzandola) la ","_key":"f853397b1cbb","_type":"span"},{"_type":"span","marks":["em"],"text":"vsp","_key":"7c4defce1426"},{"_type":"span","marks":[],"text":".","_key":"fa0959196261"}],"_type":"block","style":"normal","_key":"2d8cb64638fb"},{"_key":"60a87e53fc4a","asset":{"_ref":"image-cc82d45d3e860dd965056b8b9dcdee892a88cfd5-271x54-png","_type":"reference"},"_type":"image"},{"markDefs":[],"children":[{"text":"Anche qui il risultato sarà più apprezzabile provandolo direttamente, ma vi lascio l'anteprima del risultato:","_key":"b7b1fc79dce5","_type":"span","marks":[]}],"_type":"block","style":"normal","_key":"bcdc3ec2d57a"},{"_type":"image","_key":"2f49eb8f3fa1","asset":{"_ref":"image-cc7386ba8f88307ad6a70c01c47957abda0c278b-720x360-gif","_type":"reference"}},{"_type":"block","style":"h3","_key":"b7e6f0653f40","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Animazioni / Cambio sprite","_key":"b40ad0397679"}]},{"style":"normal","_key":"762a0be041f7","markDefs":[],"children":[{"_key":"c01151acedf4","_type":"span","marks":[],"text":"Inizio questo paragrafo ringraziando di cuore l'utente "},{"text":"Victroium ","_key":"766ef0fd90d5","_type":"span","marks":["strong"]},{"_type":"span","marks":[],"text":"che ha realizzato uno splendido asset pack per la realizzazione di questo tutorial.","_key":"163988a869b4"}],"_type":"block"},{"markDefs":[],"children":[{"text":"Quello che ci servirà per questa parte di tutorial saranno i seguenti sprites:","_key":"5380ef6a577a","_type":"span","marks":[]}],"_type":"block","style":"normal","_key":"227c23977eda"},{"style":"normal","_key":"5c31f0a06642","listItem":"bullet","markDefs":[],"children":[{"_type":"span","marks":["em"],"text":"spr_player_idle ","_key":"679bb8d70cd1"},{"_type":"span","marks":[],"text":"(il personaggio fermo)","_key":"90c4e762907b"}],"level":1,"_type":"block"},{"_key":"de4f74eed873","listItem":"bullet","markDefs":[],"children":[{"marks":["em"],"text":"spr_player_walk ","_key":"46785303c1b6","_type":"span"},{"_type":"span","marks":[],"text":"(personaggio che cammina)","_key":"fef43c05374d"}],"level":1,"_type":"block","style":"normal"},{"_type":"block","style":"normal","_key":"064e06fbebbc","listItem":"bullet","markDefs":[],"children":[{"_type":"span","marks":["em"],"text":"spr_player_jump ","_key":"a19560aa6ab1"},{"_type":"span","marks":[],"text":"(personaggio che salta)","_key":"d9f636b26817"}],"level":1},{"children":[{"_type":"span","marks":["em"],"text":"spr_player_falling ","_key":"ecb577dfc280"},{"text":"(personaggio che torna a terra dopo un salto)","_key":"525704402739","_type":"span","marks":[]}],"level":1,"_type":"block","style":"normal","_key":"dc52412a3120","listItem":"bullet","markDefs":[]},{"_key":"4cd893db5b72","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Sviluppo","_key":"2f1e2a0a174b"}],"_type":"block","style":"h4"},{"children":[{"_type":"span","marks":[],"text":"Apriamo ","_key":"9a1d96384e8e"},{"_key":"170dcaf5618f","_type":"span","marks":["em"],"text":"Draw Event"},{"_key":"8c6e8d61983e","_type":"span","marks":[],"text":" di "},{"_type":"span","marks":["em"],"text":"obj_player","_key":"4542f88e77d7"},{"text":":","_key":"20027b1fac94","_type":"span","marks":[]}],"_type":"block","style":"normal","_key":"d66588ae458d","markDefs":[]},{"asset":{"_ref":"image-e8bfa11707954d94cb05ca892ed726de11902f83-744x270-png","_type":"reference"},"_type":"image","_key":"b8408da57696"},{"children":[{"_key":"9730f87d927e","_type":"span","marks":[],"text":"Partiamo dai "},{"_type":"span","marks":["strong"],"text":"movimenti a terra","_key":"66c3bc349b48"},{"marks":[],"text":" (riga 2). Se siamo a terra (","_key":"f1336d1fd845","_type":"span"},{"_type":"span","marks":["em"],"text":"on_ground > 0","_key":"ea136a202865"},{"text":"), non stiamo saltando (","_key":"32e8d2c2eac6","_type":"span","marks":[]},{"_type":"span","marks":["em"],"text":"vsp == 0","_key":"0e32fe4b4d6e"},{"_key":"6f43a81e68a2","_type":"span","marks":[],"text":") e siamo in movimento ("},{"text":"hsp!=0","_key":"870d15ad7f84","_type":"span","marks":["em"]},{"_type":"span","marks":[],"text":"), allora usiamo lo sprite di camminata, altrimenti usiamo quello di idle.","_key":"80e2390ccc8c"}],"_type":"block","style":"normal","_key":"68a1cc67e2aa","markDefs":[]},{"children":[{"text":"Il ","_key":"2d464271a058","_type":"span","marks":[]},{"_key":"e611c1395a7a","_type":"span","marks":["strong"],"text":"movimento in aria"},{"text":" è altrettanto semplice se abbiamo capito il coyote time trattato qualche paragrafo sopra: se non sono a terra (quindi ","_key":"ee8299d0056c","_type":"span","marks":[]},{"_key":"cb636b7865af","_type":"span","marks":["em"],"text":"on_ground "},{"text":"è minore di ","_key":"e08a53d54493","_type":"span","marks":[]},{"marks":["em"],"text":"coyote_time","_key":"50b009da9017","_type":"span"},{"_type":"span","marks":[],"text":") e la mia velocità è negativa, allora mi sto muovendo verso l'alto, altrimenti verso il basso.","_key":"88898710f84f"}],"_type":"block","style":"normal","_key":"f3632b1d7064","markDefs":[]},{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"La riga 11 non è niente di speciale: apprezziamo solo l'utilizzo della variabile ","_key":"ec485a7ab209"},{"_type":"span","marks":["em"],"text":"dir ","_key":"6bf0c2b89d1c"},{"_type":"span","marks":[],"text":"come valore di ","_key":"1b990ecd07c7"},{"text":"image_xscale ","_key":"9466e78ab5c5","_type":"span","marks":["em"]},{"_type":"span","marks":[],"text":"per permettere al nostro personaggio di \"specchiare\" lo sprite orizzontalmente quando ci stiamo spostando a destra o sinistra. Ricordo che questa \"tecnica\" è utilizzabile solo se la origin dello sprite è centrata orizzontalmente.","_key":"235a36bdcf78"}],"_type":"block","style":"normal","_key":"ea0e34ad5774"},{"_type":"block","style":"normal","_key":"8d28ebec9a4e","markDefs":[],"children":[{"text":"Con questa implementazione tutto funziona correttamente, se non per un piccolo punto: se abbiamo usato uno sprite con più frame per l'animazione del personaggio in salto o in caduta, questa continuerà a resettarsi fino al termine del salto. Per risolvere il problema ci viene in soccorso l'evento ","_key":"237d59da256b","_type":"span","marks":[]},{"_type":"span","marks":["em"],"text":"Animation End.","_key":"ff92380d3001"}]},{"_type":"image","_key":"2038c47c976b","asset":{"_ref":"image-a373489e0361c5be99fcd747086f567640eb256c-677x146-png","_type":"reference"}},{"children":[{"text":"Questo evento viene letto quando l'animazione del nostro sprite_index termina. Anche qui la logica è molto semplice, e diciamo a GM di mantenere l'ultimo frame dello sprite che abbiamo in uso. ","_key":"6f2ce5975f15","_type":"span","marks":[]}],"_type":"block","style":"normal","_key":"da93cb72599e","markDefs":[]},{"_type":"block","style":"normal","_key":"7a6f08301aab","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Se vi state chiedendo perchè ci sia quel \"-1\", il motivo è semplice: ","_key":"648002b19b03"},{"_type":"span","marks":["em"],"text":"image_index ","_key":"6c54d1fcc4c1"},{"_key":"461b33be7d36","_type":"span","marks":[],"text":"parte a contare i frame da 0."}]},{"style":"normal","_key":"873e0436a020","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Ecco qui il risultato finale.","_key":"ffb6adc244f5"}],"_type":"block"},{"_key":"cabf1760053f","asset":{"_type":"reference","_ref":"image-1ab610ee005b920154f16538fd3b4ccaf7b15448-960x540-gif"},"_type":"image"},{"_type":"block","style":"h3","_key":"d6328346d26f","markDefs":[],"children":[{"text":"Download","_key":"d8d8747a8657","_type":"span","marks":[]}]},{"markDefs":[{"_type":"link","href":"https://github.com/davidescarioni/gm-platform-starter-kit","_key":"f2b425937218"}],"children":[{"_type":"span","marks":[],"text":"Potete scaricare il codice sorgente di questo progetto da qui: ","_key":"479390a5e361"},{"_type":"span","marks":["f2b425937218"],"text":"Github","_key":"970e98067da7"}],"_type":"block","style":"normal","_key":"e1e566272508"},{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"Conclusione","_key":"f9c770e75731"}],"_type":"block","style":"h3","_key":"0d4e5a0c570f"},{"children":[{"_type":"span","marks":[],"text":"Spero che il tutorial sia risultato chiaro: nessuna di queste tecniche è davvero ","_key":"a695ba2c6d35"},{"_key":"44d15e35b21f","_type":"span","marks":["em"],"text":"necessaria"},{"text":" per la realizzazione di un platform, ma come avete potuto apprezzare, con poco codice siamo riusciti a creare una base \"robusta\" e più aggiornata della maggior parte dei tutorial che si trovano in rete.","_key":"7c9e4be2d29e","_type":"span","marks":[]}],"_type":"block","style":"normal","_key":"2cec14e1733a","markDefs":[]},{"_type":"block","style":"normal","_key":"68368f299237","markDefs":[{"_key":"95c25a78c6d3","_type":"link","href":"https://discord.gg/0wKBBPIbX2r3S32a"}],"children":[{"marks":[],"text":"Per qualsiasi domanda non fatevi problemi a venirci a trovare su ","_key":"8fe8e9153897","_type":"span"},{"_type":"span","marks":["95c25a78c6d3"],"text":"Discord","_key":"cc6feca0d97a"},{"_type":"span","marks":[],"text":" .","_key":"12e1a5f26e89"}]},{"children":[{"_type":"span","marks":[],"text":"Alla prossima!","_key":"cbf557c3d440"}],"_type":"block","style":"normal","_key":"b723555423c2","markDefs":[]}],"categories":["Tutorial"],"_id":"d0245642-6a25-44ad-804b-e33728a843e4","_createdAt":"2023-10-08T08:23:09Z","publishedAt":"2023-10-17T05:00:34.361Z","author":{"name":"Scario","image":{"_type":"image","asset":{"_ref":"image-90619da0c70512acc9cdb6bf17980b2640f171f3-180x180-webp","_type":"reference"}}},"comments":[],"mainImage":{"_type":"image","asset":{"_ref":"image-fd8dfc84de0868b018afffa23689713bd9475257-1280x720-png","_type":"reference"}},"description":"Impariamo a sviluppare una base robusta e moderna"}},"__N_SSG":true}